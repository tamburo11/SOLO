{"ast":null,"code":"import _classCallCheck from \"/Users/MS/Desktop/Projects/mySolo/SOLO/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/MS/Desktop/Projects/mySolo/SOLO/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/MS/Desktop/Projects/mySolo/SOLO/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/MS/Desktop/Projects/mySolo/SOLO/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/MS/Desktop/Projects/mySolo/SOLO/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/MS/Desktop/Projects/mySolo/SOLO/src/components/keyboard/Keyboard.js\";\nimport React from 'react';\nimport { Piano, MidiNumbers } from 'react-piano'; // import 'react-piano/dist/styles.css';\n\nimport classNames from 'classnames';\nimport DimensionsProvider from './DimensionsProvider';\nimport SoundfontProvider from './SoundfontProvider';\nimport PianoConfig from './PianoConfig';\nimport './Keyboard.css';\nimport './Keyboard_less.css';\nvar audioContext = new (window.AudioContext || window.webkitAudioContext)();\nvar soundfontHostname = 'https://d1pzp51pvbm36p.cloudfront.net';\nvar instrument_list_r = [\"oboe\", // Bb3 - G6\n\"piccolo\"];\nvar instrument_list = [{\n  value: 'accordion',\n  label: 'accordion',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('f2'),\n    last: MidiNumbers.fromNote('a7')\n  }\n}, // F2 - A6\n{\n  value: 'acoustic_grand_piano',\n  label: 'grand piano',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('a0'),\n    last: MidiNumbers.fromNote('c8')\n  }\n}, // A0 - C8\n{\n  value: 'acoustic_guitar_nylon',\n  label: 'classical guitar',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('e2'),\n    last: MidiNumbers.fromNote('b6')\n  }\n}, // E2 - B6\n{\n  value: 'acoustic_guitar_steel',\n  label: 'acoustic guitar',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('e2'),\n    last: MidiNumbers.fromNote('b6')\n  }\n}, // E2 - B6\n{\n  value: 'alto_sax',\n  label: 'alto_sax',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c3#'),\n    last: MidiNumbers.fromNote('g5')\n  }\n}, // C#3 - G#5 \n{\n  value: 'banjo',\n  label: 'banjo',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c3'),\n    last: MidiNumbers.fromNote('a4')\n  }\n}, // C3 - A4\n{\n  value: 'baritone_sax',\n  label: 'baritone sax',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c2#'),\n    last: MidiNumbers.fromNote('g4')\n  }\n}, // C#2 - G#4\n{\n  value: 'bassoon',\n  label: 'bassoon',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('b1'),\n    last: MidiNumbers.fromNote('e5')\n  }\n}, // Bb1 - Eb5 \n{\n  value: 'celesta',\n  label: 'celesta',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c3'),\n    last: MidiNumbers.fromNote('b7')\n  }\n}, // C3 - F8\n{\n  value: 'cello',\n  label: 'cello',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c2'),\n    last: MidiNumbers.fromNote('a5')\n  }\n}, // C2 - A5   \n{\n  value: 'church_organ',\n  label: 'church organ',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c1'),\n    last: MidiNumbers.fromNote('c7')\n  }\n}, // C1 - C7\n{\n  value: 'clarinet',\n  label: 'clarinet',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('d3'),\n    last: MidiNumbers.fromNote('b6')\n  }\n}, // D3 - Bb6\n{\n  value: 'contrabass',\n  label: 'contrabass',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('e1'),\n    last: MidiNumbers.fromNote('g4')\n  }\n}, // E1 - G4\n{\n  value: 'distortion_guitar',\n  label: 'distortion guitar',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('e2'),\n    last: MidiNumbers.fromNote('b6')\n  }\n}, // E2 - B6\n{\n  value: 'electric_guitar_clean',\n  label: 'electric guitar',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('e2'),\n    last: MidiNumbers.fromNote('b6')\n  }\n}, // E2 - B6\n{\n  value: 'electric_piano_1',\n  label: 'electric piano ',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('a0'),\n    last: MidiNumbers.fromNote('c8')\n  }\n}, {\n  value: 'english_horn',\n  label: 'english horn',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('e3'),\n    last: MidiNumbers.fromNote('b5')\n  }\n}, // E3 - B5\n{\n  value: 'flute',\n  label: 'flute',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('b3'),\n    last: MidiNumbers.fromNote('d7')\n  }\n}, // B3 - D7\n{\n  value: 'french_horn',\n  label: 'horn',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('b1'),\n    last: MidiNumbers.fromNote('f5')\n  }\n}, // B1 - F5\n{\n  value: 'glockenspiel',\n  label: 'glockenspiel',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('f5'),\n    last: MidiNumbers.fromNote('d8')\n  }\n}, // F5 - D8\n{\n  value: 'lead_1_square',\n  label: 'lead 1 square',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c1'),\n    last: MidiNumbers.fromNote('b7')\n  }\n}, {\n  value: 'lead_2_sawtooth',\n  label: 'lead 2 sawtooth',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c1'),\n    last: MidiNumbers.fromNote('b7')\n  }\n}, {\n  value: 'marimba',\n  label: 'marimba',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c2'),\n    last: MidiNumbers.fromNote('c7')\n  }\n}, // C2 - C7\n{\n  value: 'oboe',\n  label: 'oboe',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('b3'),\n    last: MidiNumbers.fromNote('g6')\n  }\n}, // Bb3 - G6\n{\n  value: 'piccolo',\n  label: 'piccolo',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('d5'),\n    last: MidiNumbers.fromNote('c8')\n  }\n}, // D5 - C8\n{\n  value: 'recorder',\n  label: 'recorder',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('f3'),\n    last: MidiNumbers.fromNote('g6')\n  }\n}, // F3 - G6\n{\n  value: 'soprano_sax',\n  label: 'soprano sax',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('g3#'),\n    last: MidiNumbers.fromNote('d6#')\n  }\n}, // G#3 - D6#\n{\n  value: 'tenor_sax',\n  label: 'tenor sax',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('g2#'),\n    last: MidiNumbers.fromNote('d6#')\n  }\n}, // G#2 - D#6\n{\n  value: 'timpani',\n  label: 'timpani',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('b1'),\n    last: MidiNumbers.fromNote('c4')\n  }\n}, // B1 - C4\n{\n  value: 'trombone',\n  label: 'trombone',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('e2'),\n    last: MidiNumbers.fromNote('f5')\n  }\n}, // E2 - F5\n{\n  value: 'trumpet',\n  label: 'trumpet',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('f3#'),\n    last: MidiNumbers.fromNote('c6')\n  }\n}, // F#3 - C6\n{\n  value: 'tuba',\n  label: 'tuba',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('d1'),\n    last: MidiNumbers.fromNote('g4')\n  }\n}, // D1 - G4\n{\n  value: 'tubular_bells',\n  label: 'tubular bells',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('f3'),\n    last: MidiNumbers.fromNote('f5')\n  }\n}, // F3 - F5\n{\n  value: 'vibraphone',\n  label: 'vibraphone',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('f3'),\n    last: MidiNumbers.fromNote('f6')\n  }\n}, // F3 - F6\n{\n  value: 'viola',\n  label: 'viola',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('c3'),\n    last: MidiNumbers.fromNote('a6')\n  }\n}, // C3 - A6\n{\n  value: 'violin',\n  label: 'violin',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('g3'),\n    last: MidiNumbers.fromNote('a7')\n  }\n}, // G3 - A7\n{\n  value: 'xylophone',\n  label: 'xylophone',\n  isFixed: true,\n  range: {\n    first: MidiNumbers.fromNote('f4'),\n    last: MidiNumbers.fromNote('c8')\n  } // F4 - C8\n\n}];\nvar mario = [[76], [73], [65], [76], [65], [40], [65], [76], [65], [40], [65], [72], [65], [76], [65], [40], [65], [79], [65], [40], [36], [67], [65], [40], [36], [72], [65], [40], [24], [67], [65], [40], [24], [64], [65], [40], [24], [69], [65], [40], [65], [71], [65], [40], [65], [70], [65], [69], [65], [40], [65], [67], [16], [76], [16], [79], [16], [81], [65], [40], [65], [77], [65], [79], [65], [40], [65], [76], [65], [40], [65], [72], [65], [74], [65], [71], [65], [40], [24], [48], [65], [40], [65], [79], [65], [78], [65], [77], [65], [75], [65], [60], [65], [76], [65], [53], [65], [68], [65], [69], [65], [72], [65], [60], [65], [69], [65], [72], [65], [74], [65], [48], [65], [40], [65], [79], [65], [78], [65], [77], [65], [75], [65], [55], [65], [76], [65], [40], [65], [84], [65], [40], [65], [84], [65], [84], [65], [55], [65], [40], [65], [48], [65], [40], [65], [79], [65], [78], [65], [77], [65], [75], [65], [60], [65], [76], [65], [53], [65], [68], [65], [69], [65], [72], [65], [60], [65], [69], [65], [72], [65], [74], [65], [48], [65], [40], [65], [75], [24], [40], [65], [74], [24], [40], [65], [72], [24], [40], [42], [55], [42], [55], [42], [40], [42], [48], [42], [72], [42], [72], [42], [40], [42], [72], [42], [40], [42], [72], [42], [74], [42], [40], [42], [76], [42], [72], [42], [40], [42], [69], [42], [67], [42], [40], [42], [43], [42], [40], [42], [72], [42], [72], [42], [40], [42], [72], [42], [40], [42], [72], [42], [74], [42], [76], [42], [55], [42], [40], [24], [48], [42], [40], [24], [43], [42], [40], [42], [72], [42], [72], [42], [40], [42], [72], [42], [40], [42], [72], [42], [74], [42], [40], [42], [76], [42], [72], [42], [40], [42], [69], [42], [67], [42], [40], [42], [43], [42], [40], [42], [76], [42], [76], [42], [40], [42], [76], [42], [40], [42], [72], [42], [76], [42], [40], [42], [79], [42], [40], [36], [67], [42], [40], [36], [76], [42], [72], [42], [40], [42], [67], [42], [55], [42], [40], [42], [68], [42], [40], [42], [69], [42], [77], [42], [53], [42], [77], [42], [69], [42], [60], [42], [53], [42], [40], [42], [71], [16], [81], [16], [81], [16], [81], [16], [79], [16], [77], [16], [76], [42], [72], [42], [55], [42], [69], [42], [67], [42], [60], [42], [55], [42], [40], [42], [76], [42], [72], [42], [40], [42], [67], [42], [55], [42], [40], [42], [68], [42], [40], [42], [69], [42], [77], [42], [53], [42], [77], [42], [69], [42], [60], [42], [53], [42], [40], [42], [71], [42], [77], [42], [40], [42], [77], [42], [77], [16], [76], [16], [74], [16], [72], [42], [64], [42], [55], [42], [64], [42], [60], [42], [40], [36], [72], [42], [40], [24], [67], [42], [40], [24], [64], [24], [69], [16], [71], [16], [69], [16], [68], [24], [70], [24], [68], [24], [67], [42], [65], [42], [67], [48]];\n\nvar Keyboard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Keyboard, _React$Component);\n\n  function Keyboard(props) {\n    var _this;\n\n    _classCallCheck(this, Keyboard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Keyboard).call(this, props));\n    _this.state = {\n      numberOfNotes: 8,\n      min: MidiNumbers.fromNote('a0'),\n      max: MidiNumbers.fromNote('c8'),\n      songDone: false,\n      showPitch: false,\n      stopAllNotes: function stopAllNotes() {\n        return console.warn('stopAllNotes not yet loaded');\n      },\n      playNote: true,\n      timeoutID: null,\n      instruments: [],\n      nextNote: [],\n      activeNotesIndex: -1,\n      isPlaying: false,\n      config: {\n        instrumentSet: ['acoustic_grand_piano'],\n        octaves: 1,\n        pauseTime: 0,\n        duration: 1,\n        intervals: [{\n          value: 5\n        }],\n        instrumentName: 'acoustic_grand_piano',\n        noteRange: {\n          first: MidiNumbers.fromNote('c1'),\n          last: MidiNumbers.fromNote('b7')\n        }\n      }\n    };\n\n    _this.repaint = function () {\n      var instrumentMin = _this.firstAndLastNote()[0];\n\n      var instrumentMax = _this.firstAndLastNote()[1];\n\n      var min = instrumentMin < _this.state.config.noteRange.first ? _this.state.config.noteRange.first : instrumentMin;\n      var max = instrumentMax > _this.state.config.noteRange.last ? _this.state.config.noteRange.last : instrumentMax;\n\n      _this.setState({\n        min: min,\n        max: max\n      }); //console.log( \"min: \", this.state.min)\n      //console.log( \"max: \", this.state.max)\n      //let dup = {this.state.config};\n      // console.log(dup)\n      // dup.noteRange.first = min;\n      // dup.noteRange.last = max;\n      // this.setState({config: dup});\n      // console.log('instrumentMax : ' + instrumentMax ) \n      // console.log('instrumentMin : ' + instrumentMin ) \n\n\n      var tasti = document.getElementsByClassName(\"ReactPiano__Keyboard\")[0].getElementsByClassName(\"ReactPiano__Key\"); // for in the array of tasti\n\n      for (var i = 0; i < tasti.length; i++) {\n        // if is a natural key\n        if (tasti[i].classList.contains(\"ReactPiano__Key--natural\")) {\n          // if is out of register \n          if (i < min - 24 || i > max - 24) {\n            tasti[i].style.backgroundColor = \"rgb(216, 221, 232)\";\n          } else {\n            // if is in the register \n            tasti[i].style.backgroundColor = \"\";\n          } // if is an accidental key\n\n        } else if (tasti[i].classList.contains(\"ReactPiano__Key--accidental\")) {\n          // if is out of register \n          if (i < min - 24 || i > max - 24) {\n            tasti[i].style.backgroundColor = \"rgb(216, 221, 232)\";\n            tasti[i].style.borderColor = \"#555\";\n          } else {\n            // if is in the register\n            tasti[i].style.backgroundColor = \"\";\n          }\n        }\n      }\n    };\n\n    _this.setPlaying = function (value) {\n      var generate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (value) {\n        // let h = document.getElementsByClassName(\"not-lds-dual-ring\")[0]\n        //    if (h != undefined) {\n        //      h.className = \"lds-dual-ring\"\n        //      //questo va modificato in caso tu voglia aggiunger un testo (in caso aggiungi uno stile al testo)\n        //      //h.innerHTML = \"loading sound source\"\n        //    }\n        //clearTimeout(this.state.timeoutID);\n        if (generate) {\n          _this.generateSong();\n        } // if set playing then setTimeout with callback\n\n\n        var timeoutCallback = function timeoutCallback(playNote, nextCallback) {\n          var duration;\n\n          if (playNote) {\n            // console.log(\"note\",(new Date()).getSeconds())\n            var index = _this.state.activeNotesIndex + 1; // label onver current interval\n\n            var lables = document.getElementById(\"solutions\").getElementsByClassName(\"current\");\n\n            for (var i = 0; i < lables.length; i++) {\n              lables[i].style.border = \"thick solid #FFFFFF\";\n            }\n\n            if (index < _this.state.numberOfNotes + 1 && index > 0) {\n              lables[index - 1].style.border = \"thick solid #3877e1\";\n            }\n\n            if (index < _this.props.song.length) {\n              // set state to play note\n              _this.setState({\n                activeNotesIndex: index,\n                nextNote: _this.props.song[index]\n              }); // calculate duration\n\n\n              duration = _this.state.config.duration * 1000;\n            } else {\n              // if (this.state.isPlaying) {\n              //   console.log('cambio di stato')\n              _this.props.setPressedPlay(false); // }\n\n\n              _this.setPlaying(false);\n\n              _this.setState({\n                playNote: false,\n                songDone: true\n              });\n            }\n          } else {\n            // set state to play pause\n            _this.setState({\n              nextNote: [-1]\n            }); // calculate duration\n\n\n            duration = _this.state.config.pauseTime * 1000;\n          }\n\n          if (!_this.state.songDone) {\n            _this.setState({\n              timeoutID: setTimeout(function () {\n                return nextCallback(!playNote, nextCallback);\n              }, duration)\n            });\n          } else {\n            clearTimeout(_this.state.timeoutID);\n\n            _this.setState({\n              activeNotesIndex: -1 //isPlaying: false,\n\n            });\n          }\n        };\n\n        _this.setState({\n          timeoutID: setTimeout(function () {\n            return timeoutCallback(true, timeoutCallback);\n          }, 0)\n        });\n      } else {\n        // at click on start\n        clearTimeout(_this.state.timeoutID);\n\n        _this.state.stopAllNotes();\n\n        _this.setState({\n          activeNotesIndex: -1\n        });\n      } // at click on stop\n\n\n      _this.setState({\n        isPlaying: value,\n        playNote: true\n      });\n    };\n\n    _this.playbackIntervalFn = null;\n    return _this;\n  }\n\n  _createClass(Keyboard, [{\n    key: \"firstAndLastNote\",\n    value: function firstAndLastNote() {\n      var _this2 = this;\n\n      //if list is empty we use piano\n      if (this.state.config.instrumentSet.length == 0) {\n        return [MidiNumbers.fromNote('c1'), MidiNumbers.fromNote('b7')];\n      }\n\n      var list = instrument_list.filter(function (value) {\n        return -1 !== _this2.state.config.instrumentSet.indexOf(value['value']);\n      });\n      var min = list.reduce(function (min, value) {\n        return value['range']['first'] < min ? value['range']['first'] : min;\n      }, list[0]['range']['first']); // console.log(\"min : \", min);\n\n      var max = list.reduce(function (max, value) {\n        return value['range']['last'] > max ? value['range']['last'] : max;\n      }, list[0]['range']['last']); // console.log(\"max : \", max);\n\n      return [min, max];\n    }\n  }, {\n    key: \"shuffle\",\n    value: function shuffle(a) {\n      for (var i = a.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var _ref = [a[j], a[i]];\n        a[i] = _ref[0];\n        a[j] = _ref[1];\n      }\n\n      return a;\n    }\n  }, {\n    key: \"getInstrumentFromNote\",\n    value: function getInstrumentFromNote(note) {\n      var instruments = this.shuffle(this.state.config.instrumentSet);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var instrument = _step.value;\n          instrument_data = instrument_list.filter(function (obj) {\n            return obj.value === instrument;\n          });\n\n          if (instrument_data[0].range.last >= note && instrument_data[0].range.first <= note) {\n            //  console.log(\"instrument_data\",instrument_data);\n            //  console.log(instrument_data[0].value)\n            // ALWAYS RETURN PIANOOOO\n            return {\n              v: instrument_data[0].value\n            };\n          }\n        };\n\n        for (var _iterator = instruments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var instrument_data;\n\n          var _ret = _loop();\n\n          if (typeof _ret === \"object\") return _ret.v;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return instrument_list[1].value;\n    }\n  }, {\n    key: \"generateSong\",\n    value: function generateSong() {\n      var newsong = [];\n      var instruments = []; // //  extract the intervals \n\n      var keys = Object.keys(this.state.config.intervals); // //  extract the note range from instrumentSet\n      //let range = this.firstAndLastNote();\n\n      var range = [this.state.min, this.state.max]; // // extract octaves\n\n      var octave = Math.floor(Math.random() * this.state.config.octaves);\n      var octaveJump = octave * 12; // console.log(\"octaveJump \",octaveJump)\n      // // select a random note between the first and the last\n\n      var startingNote = Math.floor(Math.random() * (range[1] - range[0]) + range[0]);\n      newsong.push([startingNote]); // // select an instument to play the note\n\n      instruments.push(this.getInstrumentFromNote(startingNote));\n\n      for (var i = 0; i < this.state.numberOfNotes; i++) {\n        // jumping value\n        var interval_idx = Math.floor(Math.random() * this.state.config.intervals.length);\n        var randomJump = 7;\n\n        if (this.state.config.intervals.length > 0) {\n          randomJump = parseInt(this.state.config.intervals[interval_idx].value);\n        } // randomly add intervarls \n\n\n        if (Math.random() > 0.5) {\n          if (startingNote - randomJump < range[0]) {\n            startingNote += randomJump;\n\n            if (startingNote + octaveJump < range[1]) {\n              // console.log('alzato di ' + octaveJump)\n              startingNote += octaveJump;\n            } // console.log(\"startingNote += randomJump\")\n\n          } else {\n            startingNote -= randomJump;\n\n            if (startingNote - octaveJump > range[0]) {\n              // console.log('abbassato di ' + octaveJump)\n              startingNote -= octaveJump;\n            } // console.log(\"startingNote -= randomJump\")\n\n          }\n        } else {\n          if (startingNote + randomJump > range[1]) {\n            startingNote -= randomJump;\n\n            if (startingNote - octaveJump > range[0]) {\n              // console.log('abbassato di ' + octaveJump)\n              startingNote -= octaveJump;\n            } // console.log(\"startingNote -= randomJump\")\n\n          } else {\n            startingNote += randomJump;\n\n            if (startingNote + octaveJump < range[1]) {\n              // console.log('alzato di ' + octaveJump)\n              startingNote += octaveJump;\n            } // console.log(\"startingNote += randomJump\")\n\n          }\n        } // add octaves\n\n\n        newsong.push([startingNote]);\n        instruments.push(this.getInstrumentFromNote(startingNote));\n      } // console.log('instruments : ', instruments)\n\n\n      this.setState({\n        instruments: instruments\n      }); // console.log(instruments);\n      // console.log(newsong);\n\n      this.props.setSong(newsong);\n      this.setState({\n        activeNotesIndex: -1,\n        nextNote: []\n      });\n    }\n  }, {\n    key: \"restart\",\n    //  static getDerivedStateFromProps(nextProps, prevState){\n    //   if(nextProps.someValue!==prevState.someValue){\n    //     console.log('aggiornato')\n    //   }\n    //   else return null;\n    // }\n    value: function restart() {\n      this.setPlaying(true, false);\n      this.setState({\n        playNote: true,\n        songDone: false\n      });\n    }\n  }, {\n    key: \"extractMin\",\n    value: function extractMin(array) {\n      var min = 10000;\n\n      for (var i = 0; i < array.length; i++) {\n        if (array[i].value < min) {\n          min = parseInt(array[i].value);\n        }\n      }\n\n      if (array.length == 0) {\n        return 7;\n      }\n\n      return min;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: this.state.showPitch ? \"show\" : \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, React.createElement(SoundfontProvider, {\n        audioContext: audioContext,\n        instrumentName: this.state.config.instrumentSet.length == 0 ? \"acoustic_grand_piano\" : this.state.instruments[this.state.activeNotesIndex],\n        hostname: soundfontHostname,\n        onLoad: function onLoad(_ref2) {\n          var stopAllNotes = _ref2.stopAllNotes;\n          return _this3.setState({\n            stopAllNotes: stopAllNotes\n          });\n        },\n        render: function render(_ref3) {\n          var isLoading = _ref3.isLoading,\n              playNote = _ref3.playNote,\n              stopNote = _ref3.stopNote;\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 401\n            },\n            __self: this\n          }, React.createElement(DimensionsProvider, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 402\n            },\n            __self: this\n          }, function (_ref4) {\n            var containerWidth = _ref4.containerWidth;\n            return React.createElement(Piano, {\n              activeNotes: _this3.state.isPlaying ? _this3.state.nextNote : [],\n              noteRange: {\n                first: MidiNumbers.fromNote('c1'),\n                last: MidiNumbers.fromNote('b7')\n              },\n              playNote: playNote,\n              stopNote: stopNote,\n              disabled: isLoading,\n              width: containerWidth,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 404\n              },\n              __self: this\n            });\n          }), React.createElement(PianoConfig, {\n            repaint: _this3.repaint,\n            config: _this3.state.config,\n            setConfig: function setConfig(config) {\n              _this3.setState({\n                config: Object.assign({}, _this3.state.config, config)\n              });\n            },\n            setShow: function setShow(showPitch) {\n              return _this3.setState({\n                showPitch: showPitch\n              });\n            },\n            showPitch: _this3.state.showPitch,\n            pauseTime: _this3.state.config.pauseTime,\n            instrumentList: instrument_list,\n            instrumentSet: _this3.state.config.instrumentSet,\n            instrumentName: _this3.state.config.instrumentSet.length == 0 ? \"acoustic_grand_piano\" : _this3.state.instruments[_this3.state.activeNotesIndex],\n            song: _this3.props.song,\n            activeNotesIndex: _this3.state.activeNotesIndex,\n            duration: _this3.state.config.duration,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 419\n            },\n            __self: this\n          }), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 440\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            class: \"not-lds-dual-ring\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 441\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            className: \"form-row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 442\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"col-6\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 444\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            disabled: _this3.state.max - _this3.state.min < _this3.extractMin(_this3.state.config.intervals),\n            style: {\n              height: '50px '\n            },\n            className: classNames('btn-block', {\n              'btn-success': !_this3.state.isPlaying,\n              'btn-danger': _this3.state.isPlaying,\n              'btn-warning': _this3.state.max - _this3.state.min < _this3.extractMin(_this3.state.config.intervals)\n            }),\n            onClick: function onClick() {\n              if (!_this3.state.isPlaying) {\n                //console.log('cambio di stato')\n                _this3.props.setPressedPlay(true);\n              } else {\n                _this3.props.setPressedPlay(false);\n              }\n\n              _this3.setState({\n                songDone: false\n              });\n\n              _this3.setPlaying(!_this3.state.isPlaying);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 447\n            },\n            __self: this\n          }, _this3.state.isPlaying ? 'stop' : 'start')), React.createElement(\"div\", {\n            className: \"col-6\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 472\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            style: {\n              height: '50px '\n            },\n            className: classNames('btn-block', {\n              'btn-success': !_this3.state.isPlaying,\n              'btn-secondary': _this3.state.isPlaying,\n              'btn-warning': _this3.state.max - _this3.state.min < _this3.extractMin(_this3.state.config.intervals)\n            }),\n            onClick: function onClick() {\n              return _this3.restart();\n            },\n            disabled: _this3.state.isPlaying || _this3.state.max - _this3.state.min < _this3.extractMin(_this3.state.config.intervals),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 473\n            },\n            __self: this\n          }, 'restart'))));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Keyboard;\n}(React.Component);\n\nexport default Keyboard;","map":{"version":3,"sources":["/Users/MS/Desktop/Projects/mySolo/SOLO/src/components/keyboard/Keyboard.js"],"names":["React","Piano","MidiNumbers","classNames","DimensionsProvider","SoundfontProvider","PianoConfig","audioContext","window","AudioContext","webkitAudioContext","soundfontHostname","instrument_list_r","instrument_list","value","label","isFixed","range","first","fromNote","last","mario","Keyboard","props","state","numberOfNotes","min","max","songDone","showPitch","stopAllNotes","console","warn","playNote","timeoutID","instruments","nextNote","activeNotesIndex","isPlaying","config","instrumentSet","octaves","pauseTime","duration","intervals","instrumentName","noteRange","repaint","instrumentMin","firstAndLastNote","instrumentMax","setState","tasti","document","getElementsByClassName","i","length","classList","contains","style","backgroundColor","borderColor","setPlaying","generate","generateSong","timeoutCallback","nextCallback","index","lables","getElementById","border","song","setPressedPlay","setTimeout","clearTimeout","playbackIntervalFn","list","filter","indexOf","reduce","a","j","Math","floor","random","note","shuffle","instrument","instrument_data","obj","newsong","keys","Object","octave","octaveJump","startingNote","push","getInstrumentFromNote","interval_idx","randomJump","parseInt","setSong","array","isLoading","stopNote","containerWidth","assign","extractMin","height","restart","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Piano, MidiNumbers } from 'react-piano';\n// import 'react-piano/dist/styles.css';\nimport classNames from 'classnames';\nimport DimensionsProvider from './DimensionsProvider';\nimport SoundfontProvider from './SoundfontProvider';\nimport PianoConfig from './PianoConfig';\n\nimport './Keyboard.css';\nimport './Keyboard_less.css'; \n\n\nconst audioContext = new (window.AudioContext || window.webkitAudioContext)();\nconst soundfontHostname = 'https://d1pzp51pvbm36p.cloudfront.net';\n\nconst instrument_list_r= [\n  \"oboe\", // Bb3 - G6\n  \"piccolo\", // D5 - C8\n  ] \n  var instrument_list = [\n  { value: 'accordion', label: 'accordion', isFixed: true, range:                           { first: MidiNumbers.fromNote('f2'), last: MidiNumbers.fromNote('a7') } }, // F2 - A6\n  { value: 'acoustic_grand_piano', label: 'grand piano', isFixed: true, range:              { first: MidiNumbers.fromNote('a0'), last: MidiNumbers.fromNote('c8') } }, // A0 - C8\n  { value: 'acoustic_guitar_nylon', label: 'classical guitar', isFixed: true, range:        { first: MidiNumbers.fromNote('e2'), last: MidiNumbers.fromNote('b6') } }, // E2 - B6\n  { value: 'acoustic_guitar_steel', label: 'acoustic guitar', isFixed: true, range:         { first: MidiNumbers.fromNote('e2'), last: MidiNumbers.fromNote('b6') } }, // E2 - B6\n  { value: 'alto_sax', label: 'alto_sax', isFixed: true, range:                             { first: MidiNumbers.fromNote('c3#'), last: MidiNumbers.fromNote('g5') } }, // C#3 - G#5 \n  { value: 'banjo', label: 'banjo', isFixed: true, range:                                   { first: MidiNumbers.fromNote('c3'), last: MidiNumbers.fromNote('a4') } }, // C3 - A4\n  { value: 'baritone_sax', label: 'baritone sax', isFixed: true, range:                     { first: MidiNumbers.fromNote('c2#'), last: MidiNumbers.fromNote('g4') } }, // C#2 - G#4\n  { value: 'bassoon', label: 'bassoon', isFixed: true, range:                               { first: MidiNumbers.fromNote('b1'), last: MidiNumbers.fromNote('e5') } },// Bb1 - Eb5 \n  { value: 'celesta', label: 'celesta', isFixed: true, range:                               { first: MidiNumbers.fromNote('c3'), last: MidiNumbers.fromNote('b7') } }, // C3 - F8\n  { value: 'cello', label: 'cello', isFixed: true, range:                                   { first: MidiNumbers.fromNote('c2'), last: MidiNumbers.fromNote('a5') } }, // C2 - A5   \n  { value: 'church_organ', label: 'church organ', isFixed: true, range:                     { first: MidiNumbers.fromNote('c1'), last: MidiNumbers.fromNote('c7') } }, // C1 - C7\n  { value: 'clarinet', label: 'clarinet', isFixed: true, range:                             { first: MidiNumbers.fromNote('d3'), last: MidiNumbers.fromNote('b6') } }, // D3 - Bb6\n  { value: 'contrabass', label: 'contrabass', isFixed: true, range:                         { first: MidiNumbers.fromNote('e1'), last: MidiNumbers.fromNote('g4') } }, // E1 - G4\n  { value: 'distortion_guitar', label: 'distortion guitar', isFixed: true, range:           { first: MidiNumbers.fromNote('e2'), last: MidiNumbers.fromNote('b6') } }, // E2 - B6\n  { value: 'electric_guitar_clean', label: 'electric guitar', isFixed: true, range:         { first: MidiNumbers.fromNote('e2'), last: MidiNumbers.fromNote('b6') } }, // E2 - B6\n  { value: 'electric_piano_1', label: 'electric piano ', isFixed: true, range:              { first: MidiNumbers.fromNote('a0'), last: MidiNumbers.fromNote('c8') } },\n  { value: 'english_horn', label: 'english horn', isFixed: true, range:                     { first: MidiNumbers.fromNote('e3'), last: MidiNumbers.fromNote('b5') } }, // E3 - B5\n  { value: 'flute', label: 'flute', isFixed: true, range:                                   { first: MidiNumbers.fromNote('b3'), last: MidiNumbers.fromNote('d7') } }, // B3 - D7\n  { value: 'french_horn', label: 'horn', isFixed: true, range:                              { first: MidiNumbers.fromNote('b1'), last: MidiNumbers.fromNote('f5') } }, // B1 - F5\n  { value: 'glockenspiel', label: 'glockenspiel', isFixed: true, range:                     { first: MidiNumbers.fromNote('f5'), last: MidiNumbers.fromNote('d8') } }, // F5 - D8\n  { value: 'lead_1_square', label: 'lead 1 square', isFixed: true, range:                   { first: MidiNumbers.fromNote('c1'), last: MidiNumbers.fromNote('b7') } },\n  { value: 'lead_2_sawtooth', label: 'lead 2 sawtooth', isFixed: true, range:               { first: MidiNumbers.fromNote('c1'), last: MidiNumbers.fromNote('b7') } },\n  { value: 'marimba', label: 'marimba', isFixed: true, range:                               { first: MidiNumbers.fromNote('c2'), last: MidiNumbers.fromNote('c7') } }, // C2 - C7\n  { value: 'oboe', label: 'oboe', isFixed: true, range:                                     { first: MidiNumbers.fromNote('b3'), last: MidiNumbers.fromNote('g6') } }, // Bb3 - G6\n  { value: 'piccolo', label: 'piccolo', isFixed: true, range:                               { first: MidiNumbers.fromNote('d5'), last: MidiNumbers.fromNote('c8') } }, // D5 - C8\n  { value: 'recorder', label: 'recorder', isFixed: true, range:                             { first: MidiNumbers.fromNote('f3'), last: MidiNumbers.fromNote('g6') } }, // F3 - G6\n  { value: 'soprano_sax', label: 'soprano sax', isFixed: true, range:                       { first: MidiNumbers.fromNote('g3#'), last: MidiNumbers.fromNote('d6#') } }, // G#3 - D6#\n  { value: 'tenor_sax', label: 'tenor sax', isFixed: true, range:                           { first: MidiNumbers.fromNote('g2#'), last: MidiNumbers.fromNote('d6#') } }, // G#2 - D#6\n  { value: 'timpani', label: 'timpani', isFixed: true, range:                               { first: MidiNumbers.fromNote('b1'), last: MidiNumbers.fromNote('c4') } }, // B1 - C4\n  { value: 'trombone', label: 'trombone', isFixed: true, range:                             { first: MidiNumbers.fromNote('e2'), last: MidiNumbers.fromNote('f5') } }, // E2 - F5\n  { value: 'trumpet', label: 'trumpet', isFixed: true, range:                               { first: MidiNumbers.fromNote('f3#'), last: MidiNumbers.fromNote('c6') } }, // F#3 - C6\n  { value: 'tuba', label: 'tuba', isFixed: true, range:                                     { first: MidiNumbers.fromNote('d1'), last: MidiNumbers.fromNote('g4') } }, // D1 - G4\n  { value: 'tubular_bells', label: 'tubular bells', isFixed: true, range:                   { first: MidiNumbers.fromNote('f3'), last: MidiNumbers.fromNote('f5') } }, // F3 - F5\n  { value: 'vibraphone', label: 'vibraphone', isFixed: true, range:                         { first: MidiNumbers.fromNote('f3'), last: MidiNumbers.fromNote('f6') } }, // F3 - F6\n  { value: 'viola', label: 'viola', isFixed: true, range:                                   { first: MidiNumbers.fromNote('c3'), last: MidiNumbers.fromNote('a6') } }, // C3 - A6\n  { value: 'violin', label: 'violin', isFixed: true, range:                                 { first: MidiNumbers.fromNote('g3'), last: MidiNumbers.fromNote('a7') } }, // G3 - A7\n  { value: 'xylophone', label: 'xylophone', isFixed: true, range:                           { first: MidiNumbers.fromNote('f4'), last: MidiNumbers.fromNote('c8') } } // F4 - C8\n  ]\n  var mario = [\n  [76], [73], [65],\n  [76], [65], [40], [65], [76], [65], [40], [65], [72], [65], [76], [65], [40], [65], [79], [65], [40], [36], [67], [65], [40], [36], [72], [65], [40], [24], [67], [65], [40], [24], [64], [65], [40], [24], [69], [65], [40], [65], [71], [65], [40], [65], [70], [65], [69], [65], [40], [65], [67], [16], [76], [16], [79], [16], [81], [65], [40], [65], [77], [65], [79], [65], [40], [65], [76], [65], [40], [65], [72], [65], [74], [65], [71], [65], [40], [24], [48], [65], [40], [65], [79], [65], [78], [65], [77], [65], [75], [65], [60], [65], [76], [65], [53], [65], [68], [65], [69], [65], [72], [65], [60], [65], [69], [65], [72], [65], [74], [65], [48], [65], [40], [65], [79], [65], [78], [65], [77], [65], [75], [65], [55], [65], [76], [65], [40], [65], [84], [65], [40], [65], [84], [65], [84], [65], [55], [65], [40], [65], [48], [65], [40], [65], [79], [65], [78], [65], [77], [65], [75], [65], [60], [65], [76], [65], [53], [65], [68], [65], [69], [65], [72], [65], [60], [65], [69], [65], [72], [65], [74], [65], [48], [65], [40], [65], [75], [24], [40], [65], [74], [24], [40], [65], [72], [24], [40], [42], [55], [42], [55], [42], [40], [42], [48], [42], [72], [42], [72], [42], [40], [42], [72], [42], [40], [42], [72], [42], [74], [42], [40], [42], [76], [42], [72], [42], [40], [42], [69], [42], [67], [42], [40], [42], [43], [42], [40], [42], [72], [42], [72], [42], [40], [42], [72], [42], [40], [42], [72], [42], [74], [42], [76], [42], [55], [42], [40], [24], [48], [42], [40], [24], [43], [42], [40], [42], [72], [42], [72], [42], [40], [42], [72], [42], [40], [42], [72], [42], [74], [42], [40], [42], [76], [42], [72], [42], [40], [42], [69], [42], [67], [42], [40], [42], [43], [42], [40], [42], [76], [42], [76], [42], [40], [42], [76], [42], [40], [42], [72], [42], [76], [42], [40], [42], [79], [42], [40], [36], [67], [42], [40], [36], [76], [42], [72], [42], [40], [42], [67], [42], [55], [42], [40], [42], [68], [42], [40], [42], [69], [42], [77], [42], [53], [42], [77], [42], [69], [42], [60], [42], [53], [42], [40], [42], [71], [16], [81], [16], [81], [16], [81], [16], [79], [16], [77], [16], [76], [42], [72], [42], [55], [42], [69], [42], [67], [42], [60], [42], [55], [42], [40], [42], [76], [42], [72], [42], [40], [42], [67], [42], [55], [42], [40], [42], [68], [42], [40], [42], [69], [42], [77], [42], [53], [42], [77], [42], [69], [42], [60], [42], [53], [42], [40], [42], [71], [42], [77], [42], [40], [42], [77], [42], [77], [16], [76], [16], [74], [16], [72], [42], [64], [42], [55], [42], [64], [42], [60], [42], [40], [36], [72], [42], [40], [24], [67], [42], [40], [24], [64], [24], [69], [16], [71], [16], [69], [16], [68], [24], [70], [24], [68], [24], [67], [42], [65], [42], [67], [48]\n  ];\n\n  class Keyboard extends React.Component {\n    state = {\n      numberOfNotes : 8,\n      min : MidiNumbers.fromNote('a0'),\n      max : MidiNumbers.fromNote('c8'),\n      songDone:false,\n      showPitch:false,\n      stopAllNotes: () => console.warn('stopAllNotes not yet loaded'),\n      playNote: true,\n      timeoutID: null,\n      instruments: [],\n      nextNote: [],\n      activeNotesIndex: -1,\n      isPlaying: false,\n      config: {\n        instrumentSet: ['acoustic_grand_piano'],\n        octaves: 1,\n        pauseTime: 0,\n        duration: 1,\n        intervals: [{value : 5}],\n        instrumentName: 'acoustic_grand_piano',\n        noteRange: {\n          first: MidiNumbers.fromNote('c1'),\n          last: MidiNumbers.fromNote('b7'),\n        },\n      },\n    };\n\n    constructor(props) {\n      super(props);\n      this.playbackIntervalFn = null;\n    };\n\n    repaint = () => {\n      let instrumentMin = this.firstAndLastNote()[0];\n      let instrumentMax = this.firstAndLastNote()[1];\n      let min = instrumentMin < this.state.config.noteRange.first ? this.state.config.noteRange.first :instrumentMin\n      let max = instrumentMax > this.state.config.noteRange.last ? this.state.config.noteRange.last : instrumentMax\n      this.setState({min:min,max:max})\n      //console.log( \"min: \", this.state.min)\n      //console.log( \"max: \", this.state.max)\n\n      //let dup = {this.state.config};\n      // console.log(dup)\n      // dup.noteRange.first = min;\n      // dup.noteRange.last = max;\n      // this.setState({config: dup});\n\n\n    // console.log('instrumentMax : ' + instrumentMax ) \n    // console.log('instrumentMin : ' + instrumentMin ) \n\n\n    let tasti = document.getElementsByClassName(\"ReactPiano__Keyboard\")[0].getElementsByClassName(\"ReactPiano__Key\");\n    \n    // for in the array of tasti\n    for(let i = 0; i < tasti.length; i++){\n      // if is a natural key\n      if(tasti[i].classList.contains(\"ReactPiano__Key--natural\")){\n\n      // if is out of register \n      if(i< min-24||i>max-24){\n        tasti[i].style.backgroundColor=\"rgb(216, 221, 232)\";\n       } else { // if is in the register \n        tasti[i].style.backgroundColor=\"\";\n      }\n\n    // if is an accidental key\n  } else if(tasti[i].classList.contains(\"ReactPiano__Key--accidental\")){\n        // if is out of register \n        if(i< min-24||i>max-24){\n          tasti[i].style.backgroundColor=\"rgb(216, 221, 232)\";\n          tasti[i].style.borderColor=\"#555\";\n        } else { // if is in the register\n          tasti[i].style.backgroundColor=\"\";\n        }\n      }\n\n    }\n  }  \n\n  firstAndLastNote() {\n    //if list is empty we use piano\n    if (this.state.config.instrumentSet.length == 0) {\n      return [MidiNumbers.fromNote('c1'), MidiNumbers.fromNote('b7')]\n    }\n    let list = instrument_list.filter(value => -1 !== this.state.config.instrumentSet.indexOf(value['value']));\n\n    let min = list.reduce((min, value) => value['range']['first'] < min ? value['range']['first'] : min, list[0]['range']['first']);\n    // console.log(\"min : \", min);\n\n    let max = list.reduce((max, value) => value['range']['last'] > max ? value['range']['last'] : max, list[0]['range']['last']);\n    // console.log(\"max : \", max);\n    return [min, max];\n  }\n\n  shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n  }\n\n  getInstrumentFromNote(note) {\n    let instruments = this.shuffle(this.state.config.instrumentSet);\n\n    for (let instrument of instruments) {\n      var instrument_data = instrument_list.filter(obj => {\n        return obj.value === instrument\n      })\n      if (instrument_data[0].range.last >= note && instrument_data[0].range.first <= note) {\n        //  console.log(\"instrument_data\",instrument_data);\n        //  console.log(instrument_data[0].value)\n        // ALWAYS RETURN PIANOOOO\n        return instrument_data[0].value\n      }\n    }\n\n    return instrument_list[1].value;\n  }\n\n  generateSong() {\n    const newsong = [];\n    const instruments = [];\n\n    // //  extract the intervals \n    var keys = Object.keys(this.state.config.intervals)\n\n    // //  extract the note range from instrumentSet\n    //let range = this.firstAndLastNote();\n\n    let range = [this.state.min, this.state.max]\n\n    // // extract octaves\n    let octave = Math.floor(Math.random() * this.state.config.octaves) ;\n    let octaveJump = octave*12\n    // console.log(\"octaveJump \",octaveJump)\n\n\n    // // select a random note between the first and the last\n    let startingNote = Math.floor(Math.random() * (range[1] - range[0]) + range[0])\n    newsong.push([startingNote]);\n\n    // // select an instument to play the note\n    instruments.push(this.getInstrumentFromNote(startingNote));\n\n    for (let i = 0; i < this.state.numberOfNotes; i++) {\n      // jumping value\n      let interval_idx = Math.floor(Math.random() * this.state.config.intervals.length);\n      let randomJump = 7;\n      if (this.state.config.intervals.length > 0) {\n        randomJump = parseInt(this.state.config.intervals[interval_idx].value);\n      }\n\n      // randomly add intervarls \n      if (Math.random() > 0.5) {\n        if (startingNote - randomJump < range[0]) {\n          startingNote += randomJump\n          if (startingNote + octaveJump < range[1] ){\n            // console.log('alzato di ' + octaveJump)\n            startingNote += octaveJump\n          }\n          // console.log(\"startingNote += randomJump\")\n        } else {\n          startingNote -= randomJump\n          if (startingNote - octaveJump > range[0] ){\n            // console.log('abbassato di ' + octaveJump)\n            startingNote -= octaveJump\n          }\n          // console.log(\"startingNote -= randomJump\")\n        }\n      }\n      else {\n        if (startingNote + randomJump > range[1]) {\n          startingNote -= randomJump\n          if (startingNote - octaveJump > range[0] ){\n            // console.log('abbassato di ' + octaveJump)\n            startingNote -= octaveJump\n          }\n          // console.log(\"startingNote -= randomJump\")\n        } else {\n          startingNote += randomJump\n          if (startingNote + octaveJump < range[1] ){\n            // console.log('alzato di ' + octaveJump)\n            startingNote += octaveJump\n          }\n          // console.log(\"startingNote += randomJump\")\n        }\n      }\n\n      // add octaves\n\n\n      newsong.push([startingNote]);\n      instruments.push(this.getInstrumentFromNote(startingNote));\n    }\n    // console.log('instruments : ', instruments)\n    this.setState({\n      instruments: instruments\n    })\n\n    // console.log(instruments);\n    // console.log(newsong);\n\n    this.props.setSong(newsong);\n    this.setState({ activeNotesIndex: -1, nextNote: [] });\n  };\n\n //  static getDerivedStateFromProps(nextProps, prevState){\n //   if(nextProps.someValue!==prevState.someValue){\n //     console.log('aggiornato')\n //   }\n //   else return null;\n // }\n\n\n restart() {\n  this.setPlaying(true, false);\n  this.setState({\n    playNote : true,\n    songDone: false\n  })\n};\n\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////\n//    funzione abbastanza astrusa e complessa, potrebbe essere rimodellata in una versione futura       // \n//////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nsetPlaying = (value, generate = true) => {\n  if (value) {\n         // let h = document.getElementsByClassName(\"not-lds-dual-ring\")[0]\n         //    if (h != undefined) {\n         //      h.className = \"lds-dual-ring\"\n         //      //questo va modificato in caso tu voglia aggiunger un testo (in caso aggiungi uno stile al testo)\n         //      //h.innerHTML = \"loading sound source\"\n         //    }\n        //clearTimeout(this.state.timeoutID);\n        if (generate) {\n          this.generateSong();\n        }\n        // if set playing then setTimeout with callback\n        const timeoutCallback = (playNote, nextCallback) => {\n          let duration;\n          if (playNote) {\n                // console.log(\"note\",(new Date()).getSeconds())\n                const index = (this.state.activeNotesIndex + 1);\n\n                // label onver current interval\n                let lables = document.getElementById(\"solutions\").getElementsByClassName(\"current\");\n                for (var i = 0; i < lables.length; i++) {\n                  lables[i].style.border = \"thick solid #FFFFFF\";\n                }\n                if (index < this.state.numberOfNotes+1 && index > 0){\n                  lables[index -1 ].style.border = \"thick solid #3877e1\";\n                }\n\n                if (index < this.props.song.length) {\n                    // set state to play note\n                    this.setState({\n                      activeNotesIndex: index,\n                      nextNote: this.props.song[index],\n                    })\n                    // calculate duration\n                    duration = this.state.config.duration * 1000\n                  } else {\n                    // if (this.state.isPlaying) {\n                    //   console.log('cambio di stato')\n                    this.props.setPressedPlay(false);\n                    // }\n                    this.setPlaying(false)\n                    this.setState({\n                      playNote : false,\n                      songDone: true\n                    })\n                  }\n                } else {\n                // set state to play pause\n                this.setState({\n                  nextNote: [-1],\n                })\n                // calculate duration\n                duration = this.state.config.pauseTime * 1000\n              }\n              if (!this.state.songDone){\n                this.setState({\n                 timeoutID: setTimeout(() => nextCallback(!playNote, nextCallback), duration)\n               });\n              } else {\n                clearTimeout(this.state.timeoutID);\n                this.setState({\n                  activeNotesIndex: -1,\n                  //isPlaying: false,\n                });\n              }\n            }\n            this.setState({\n              timeoutID: setTimeout(() => timeoutCallback(true, timeoutCallback), 0)\n            });\n          } else {\n        // at click on start\n        clearTimeout(this.state.timeoutID);\n        this.state.stopAllNotes();\n        this.setState({\n          activeNotesIndex: -1,\n        });\n      }\n    // at click on stop\n    this.setState({\n      isPlaying: value,\n      playNote: true\n    });\n  };\n\n  extractMin(array) {\n    let min = 10000;\n    for (var i = 0; i < array.length; i++) {\n      if (array[i].value<min) {\n        min = parseInt(array[i].value)\n      }\n    }\n    if (array.length == 0 ){ return 7}\n    return min;\n  }\n\n\n  render() {\n\n    return (\n      <div className={this.state.showPitch ? \"show\" : \"\"}>\n      <SoundfontProvider\n      audioContext={audioContext}\n      instrumentName={(this.state.config.instrumentSet.length == 0) ? \"acoustic_grand_piano\" : this.state.instruments[this.state.activeNotesIndex]}\n      hostname={soundfontHostname}\n      onLoad={({ stopAllNotes }) => this.setState({ stopAllNotes })}\n      render={({ isLoading, playNote, stopNote }) => (\n        <div>\n        <DimensionsProvider >\n        {({ containerWidth }) => (\n          <Piano\n          activeNotes={\n            this.state.isPlaying ? this.state.nextNote : []\n          }\n          noteRange={{\n            first: MidiNumbers.fromNote('c1'),\n            last: MidiNumbers.fromNote('b7'),\n          }}\n          playNote={playNote}\n          stopNote={stopNote}\n          disabled={isLoading}\n          width={containerWidth}\n          />\n          )}\n        </DimensionsProvider>\n        <PianoConfig\n        repaint={this.repaint}\n        config={this.state.config}\n        setConfig={(config) => {\n          this.setState({\n            config: Object.assign({}, this.state.config, config),\n          });\n        }}\n        setShow={(showPitch) => \n          this.setState({\n            showPitch \n          })}\n          showPitch={this.state.showPitch}\n          pauseTime={this.state.config.pauseTime}\n          instrumentList={instrument_list}\n          instrumentSet={this.state.config.instrumentSet}\n          instrumentName={(this.state.config.instrumentSet.length == 0) ? \"acoustic_grand_piano\" : this.state.instruments[this.state.activeNotesIndex]}\n          song={this.props.song}\n          activeNotesIndex={this.state.activeNotesIndex}\n          duration={this.state.config.duration}\n          />\n          <br /> \n          <div class=\"not-lds-dual-ring\"></div>\n          <div className=\"form-row\">\n\n          <div className=\"col-6\">\n         \n\n          <button \n          disabled={this.state.max - this.state.min < this.extractMin(this.state.config.intervals)}\n          style={{ height: '50px ' }}\n          className={classNames('btn-block', {\n            'btn-success': !this.state.isPlaying,\n            'btn-danger': this.state.isPlaying,\n            'btn-warning' : this.state.max - this.state.min < this.extractMin(this.state.config.intervals)\n          })}\n          onClick={() => {\n            if (!this.state.isPlaying) {\n              //console.log('cambio di stato')\n              this.props.setPressedPlay(true);\n            } else {\n              this.props.setPressedPlay(false);\n            }\n            \n            this.setState({songDone:false});\n            this.setPlaying(!this.state.isPlaying)\n          }\n        }\n        >\n        {this.state.isPlaying ? 'stop' : 'start'}\n        </button>\n        </div>\n\n        <div className=\"col-6\">\n        <button\n        style={{ height: '50px ' }}\n        className={classNames('btn-block', {\n          'btn-success': !this.state.isPlaying,\n          'btn-secondary': this.state.isPlaying,\n           'btn-warning' : this.state.max - this.state.min < this.extractMin(this.state.config.intervals)\n        })}\n        onClick={() => this.restart()}\n        disabled={this.state.isPlaying || this.state.max - this.state.min < this.extractMin(this.state.config.intervals)}\n        >\n        {'restart'}\n        </button>\n        </div>\n\n        </div>\n\n        </div>\n        )}\n      />\n      </div>\n      );\n\n  };\n\n}\n\nexport default Keyboard;\n\n"]},"metadata":{},"sourceType":"module"}